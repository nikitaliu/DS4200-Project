<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@6"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@6.1.0"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@7"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-4fcc3a5fcf7ddf0f50b7ad206b7d4d99"}, "mark": {"type": "circle"}, "encoding": {"color": {"field": "livability", "scale": {"domain": [0, 100], "scheme": "viridis"}, "title": "Livability Score", "type": "quantitative"}, "size": {"field": "population", "scale": {"range": [50, 1000]}, "title": "Population", "type": "quantitative"}, "tooltip": [{"field": "city", "title": "Town", "type": "nominal"}, {"field": "medianIncome", "format": "$,.0f", "title": "Median Income", "type": "quantitative"}, {"field": "price", "format": "$,.0f", "title": "Avg Price", "type": "quantitative"}, {"field": "population", "format": ",.0f", "title": "Population", "type": "quantitative"}, {"field": "livability", "format": ".1f", "title": "Livability", "type": "quantitative"}], "x": {"field": "medianIncome", "scale": {"zero": false}, "title": "Median Household Income ($)", "type": "quantitative"}, "y": {"field": "price", "scale": {"zero": false}, "title": "Average Listing Price ($)", "type": "quantitative"}}, "height": 500, "params": [{"name": "param_1e9efca18e7a2868", "select": {"type": "interval", "encodings": ["x", "y"]}, "bind": "scales"}], "title": {"text": "Income vs Housing Price: The Affordability Gap", "subtitle": "Each circle represents a Massachusetts town (size = population, color = livability)"}, "width": 700, "$schema": "https://vega.github.io/schema/vega-lite/v6.1.0.json", "datasets": {"data-4fcc3a5fcf7ddf0f50b7ad206b7d4d99": [{"city": "Allston", "price": 677226.2631578947, "medianIncome": 50769, "population": 6685, "walk_score": 75.15789473684211, "bike_score": 66.05263157894737, "transit_score": 2.0, "livability": 47.73684210526316}, {"city": "Arlington", "price": 1089777.380952381, "medianIncome": 56396, "population": 33693, "walk_score": 60.142857142857146, "bike_score": 58.04761904761905, "transit_score": 33.30952380952381, "livability": 50.5}, {"city": "Attleboro", "price": 656441.94, "medianIncome": 91606, "population": 8890, "walk_score": 22.93548387096774, "bike_score": 31.233333333333334, "transit_score": 15.853658536585366, "livability": 23.34082524696215}, {"city": "Belmont", "price": 1775384.6153846155, "medianIncome": 93573, "population": 16653, "walk_score": 47.38461538461539, "bike_score": 56.23076923076923, "transit_score": 25.0, "livability": 42.87179487179487}, {"city": "Boston", "price": 1931203.501165501, "medianIncome": 101271, "population": 89268, "walk_score": 85.875, "bike_score": 65.85747663551402, "transit_score": 74.36518771331058, "livability": 75.36588811627486}, {"city": "Brockton", "price": 602914.8793103448, "medianIncome": 63067, "population": 35535, "walk_score": 37.91228070175438, "bike_score": 34.36206896551724, "transit_score": 30.051724137931036, "livability": 34.10869126840088}, {"city": "Brookline", "price": 2483620.784172662, "medianIncome": 199575, "population": 16837, "walk_score": 64.41007194244604, "bike_score": 61.36690647482014, "transit_score": 52.25179856115108, "livability": 59.34292565947242}, {"city": "Cambridge", "price": 1739661.1351351351, "medianIncome": 93773, "population": 88110, "walk_score": 79.94594594594595, "bike_score": 90.71186440677967, "transit_score": 56.804054054054056, "livability": 75.82062146892656}, {"city": "Carlisle", "price": 2036285.7142857143, "medianIncome": 120206, "population": 30446, "walk_score": 11.714285714285714, "bike_score": 34.833333333333336, "transit_score": 2.0, "livability": 16.182539682539684}, {"city": "Charlestown", "price": 1040703.5357142857, "medianIncome": 56374, "population": 8074, "walk_score": 62.111111111111114, "bike_score": 54.666666666666664, "transit_score": 2.0, "livability": 39.59259259259259}, {"city": "Charlton", "price": 475493.0, "medianIncome": 83827, "population": 6678, "walk_score": 11.333333333333334, "bike_score": 10.5, "transit_score": 3.0, "livability": 8.277777777777779}, {"city": "Chelsea", "price": 744530.0, "medianIncome": 93689, "population": 48585, "walk_score": 65.05, "bike_score": 31.65, "transit_score": 45.8, "livability": 47.5}, {"city": "Chicopee", "price": 316547.45, "medianIncome": 68047, "population": 26834, "walk_score": 32.05128205128205, "bike_score": 28.725, "transit_score": 30.771428571428572, "livability": 30.51590354090354}, {"city": "Cohasset", "price": 2168701.88, "medianIncome": 51306, "population": 35080, "walk_score": 19.56, "bike_score": 12.043478260869565, "transit_score": 3.0, "livability": 11.534492753623189}, {"city": "Cranston", "price": 609966.6666666666, "medianIncome": 57994, "population": 39766, "walk_score": 13.333333333333334, "bike_score": 20.666666666666668, "transit_score": 28.5, "livability": 20.833333333333332}, {"city": "Dedham", "price": 1110772.1363636365, "medianIncome": 76736, "population": 32728, "walk_score": 36.95238095238095, "bike_score": 26.142857142857142, "transit_score": 20.761904761904763, "livability": 27.95238095238095}, {"city": "Dorchester", "price": 802531.6825396825, "medianIncome": 62688, "population": 49215, "walk_score": 63.77777777777778, "bike_score": 51.41269841269841, "transit_score": 38.0, "livability": 51.06349206349207}, {"city": "Dorchester Center", "price": 783707.5, "medianIncome": 87157, "population": 9458, "walk_score": 69.0909090909091, "bike_score": 45.833333333333336, "transit_score": 4.0, "livability": 39.641414141414145}, {"city": "Everett", "price": 713724.875, "medianIncome": 57158, "population": 34855, "walk_score": 65.0, "bike_score": 40.75, "transit_score": 54.25, "livability": 53.333333333333336}, {"city": "Fall River", "price": 604828.8602150538, "medianIncome": 54499, "population": 6154, "walk_score": 54.666666666666664, "bike_score": 44.91379310344828, "transit_score": 28.543478260869566, "livability": 42.7079793436615}, {"city": "Fitchburg", "price": 497133.37096774194, "medianIncome": 52557, "population": 47405, "walk_score": 32.63333333333333, "bike_score": 22.56896551724138, "transit_score": 20.5, "livability": 25.23409961685824}, {"city": "Framingham", "price": 780257.6296296297, "medianIncome": 78643, "population": 7869, "walk_score": 23.43548387096774, "bike_score": 21.7, "transit_score": 18.25, "livability": 21.128494623655914}, {"city": "Gardner", "price": 440958.5294117647, "medianIncome": 53987, "population": 26295, "walk_score": 25.0, "bike_score": 16.8125, "transit_score": 2.0, "livability": 14.604166666666666}, {"city": "Gloucester", "price": 1351181.76, "medianIncome": 67429, "population": 24830, "walk_score": 29.72093023255814, "bike_score": 18.2, "transit_score": 25.583333333333332, "livability": 24.501421188630488}, {"city": "Hanson", "price": 590851.3636363636, "medianIncome": 82635, "population": 48525, "walk_score": 8.75, "bike_score": 21.545454545454547, "transit_score": 2.0, "livability": 10.765151515151516}, {"city": "Haverhill", "price": 600653.6666666666, "medianIncome": 69778, "population": 11102, "walk_score": 40.04347826086956, "bike_score": 24.9, "transit_score": 22.244444444444444, "livability": 29.062640901771335}, {"city": "Holyoke", "price": 353475.4375, "medianIncome": 77751, "population": 5784, "walk_score": 46.29032258064516, "bike_score": 28.75, "transit_score": 38.642857142857146, "livability": 37.89439324116743}, {"city": "Hyde Park", "price": 795963.0, "medianIncome": 54495, "population": 45941, "walk_score": 37.72222222222222, "bike_score": 35.94444444444444, "transit_score": 2.0, "livability": 25.222222222222218}, {"city": "Jamaica Plain", "price": 1152564.238095238, "medianIncome": 60966, "population": 13621, "walk_score": 51.951219512195124, "bike_score": 71.8780487804878, "transit_score": 3.3333333333333335, "livability": 42.387533875338754}, {"city": "Lawrence", "price": 564282.2352941176, "medianIncome": 54142, "population": 37093, "walk_score": 57.35294117647059, "bike_score": 31.823529411764707, "transit_score": 27.176470588235293, "livability": 38.78431372549019}, {"city": "Leominster", "price": 487187.0967741936, "medianIncome": 67019, "population": 42233, "walk_score": 23.482758620689655, "bike_score": 24.40740740740741, "transit_score": 13.16, "livability": 20.350055342699022}, {"city": "Lexington", "price": 2605845.283018868, "medianIncome": 193847, "population": 26136, "walk_score": 24.0, "bike_score": 34.61904761904762, "transit_score": 26.641509433962263, "livability": 28.420185684336627}, {"city": "Lowell", "price": 522113.92, "medianIncome": 79305, "population": 146617, "walk_score": 58.39, "bike_score": 32.03, "transit_score": 33.77, "livability": 41.39666666666667}, {"city": "Lunenburg", "price": 763246.9411764706, "medianIncome": 70056, "population": 10237, "walk_score": 11.285714285714286, "bike_score": 13.235294117647058, "transit_score": 3.0, "livability": 9.173669467787114}, {"city": "Lynn", "price": 575907.71, "medianIncome": 63500, "population": 8343, "walk_score": 57.121212121212125, "bike_score": 32.36065573770492, "transit_score": 29.5, "livability": 39.660622619639014}, {"city": "Malden", "price": 624781.1875, "medianIncome": 58130, "population": 21964, "walk_score": 52.375, "bike_score": 29.125, "transit_score": 45.8125, "livability": 42.4375}, {"city": "Marblehead", "price": 1791644.8275862068, "medianIncome": 69128, "population": 12253, "walk_score": 37.724137931034484, "bike_score": 26.071428571428573, "transit_score": 23.85185185185185, "livability": 29.215806118104968}, {"city": "Marshfield", "price": 1254686.956521739, "medianIncome": 80445, "population": 18296, "walk_score": 19.42105263157895, "bike_score": 18.714285714285715, "transit_score": 3.0, "livability": 13.711779448621556}, {"city": "Medford", "price": 966752.3770491803, "medianIncome": 64069, "population": 28049, "walk_score": 52.950819672131146, "bike_score": 48.60655737704918, "transit_score": 44.01639344262295, "livability": 48.52459016393443}, {"city": "Melrose", "price": 1023941.5833333334, "medianIncome": 90158, "population": 7849, "walk_score": 55.583333333333336, "bike_score": 32.25, "transit_score": 25.666666666666668, "livability": 37.833333333333336}, {"city": "Milford", "price": 583957.6538461539, "medianIncome": 72687, "population": 30471, "walk_score": 29.03846153846154, "bike_score": 21.23076923076923, "transit_score": 4.0, "livability": 18.08974358974359}, {"city": "Milton", "price": 1724364.705882353, "medianIncome": 55052, "population": 9000, "walk_score": 34.34375, "bike_score": 38.54545454545455, "transit_score": 34.85294117647059, "livability": 35.914048573975045}, {"city": "Nantucket", "price": 4689109.756097561, "medianIncome": 77350, "population": 39850, "walk_score": 24.845238095238095, "bike_score": 34.04597701149425, "transit_score": 5.5, "livability": 21.463738368910782}, {"city": "Natick", "price": 1348748.8139534884, "medianIncome": 78761, "population": 32472, "walk_score": 31.85, "bike_score": 33.30555555555556, "transit_score": 2.0, "livability": 22.38518518518519}, {"city": "Needham", "price": 2386973.3333333335, "medianIncome": 73132, "population": 30351, "walk_score": 20.9, "bike_score": 23.07894736842105, "transit_score": 18.8125, "livability": 20.93048245614035}, {"city": "Needham Heights", "price": 1465983.3333333333, "medianIncome": 61261, "population": 10317, "walk_score": 28.0, "bike_score": 52.2, "transit_score": 3.0, "livability": 27.733333333333334}, {"city": "New Bedford", "price": 490463.72222222225, "medianIncome": 91576, "population": 917, "walk_score": 40.529411764705884, "bike_score": 33.07692307692308, "transit_score": 28.61111111111111, "livability": 34.07248198424669}, {"city": "New London", "price": 445000.0, "medianIncome": 74052, "population": 22209, "walk_score": 19.0, "bike_score": 16.0, "transit_score": 14.0, "livability": 16.333333333333332}, {"city": "Newport", "price": 9749999.5, "medianIncome": 68888, "population": 43756, "walk_score": 5.0, "bike_score": 30.0, "transit_score": 2.0, "livability": 12.333333333333334}, {"city": "Newton", "price": 2293964.7077922076, "medianIncome": 167295, "population": 40735, "walk_score": 45.57142857142857, "bike_score": 36.630872483221474, "transit_score": 31.805194805194805, "livability": 38.00249861994828}, {"city": "North Adams", "price": 313508.5106382979, "medianIncome": 55644, "population": 4266, "walk_score": 40.67391304347826, "bike_score": 23.97826086956522, "transit_score": 3.0, "livability": 22.550724637681157}, {"city": "North Andover", "price": 907674.9375, "medianIncome": 52914, "population": 11018, "walk_score": 28.677419354838708, "bike_score": 17.375, "transit_score": 3.0, "livability": 16.3508064516129}, {"city": "Norwich", "price": 287816.6666666667, "medianIncome": 87098, "population": 13924, "walk_score": 68.5, "bike_score": 18.666666666666668, "transit_score": 21.2, "livability": 36.12222222222223}, {"city": "Orleans", "price": 2890934.347826087, "medianIncome": 69065, "population": 28322, "walk_score": 12.565217391304348, "bike_score": 24.043478260869566, "transit_score": 4.0, "livability": 13.53623188405797}, {"city": "Pittsfield", "price": 479721.34285714285, "medianIncome": 70652, "population": 49482, "walk_score": 31.586466165413533, "bike_score": 24.171641791044777, "transit_score": 15.0234375, "livability": 23.593848485486102}, {"city": "Providence", "price": 387421.3333333333, "medianIncome": 83982, "population": 5504, "walk_score": 50.0, "bike_score": 46.75, "transit_score": 36.333333333333336, "livability": 44.361111111111114}, {"city": "Quincy", "price": 959360.4134615385, "medianIncome": 83591, "population": 28960, "walk_score": 43.76699029126213, "bike_score": 30.135922330097088, "transit_score": 34.22115384615385, "livability": 36.041355489171025}, {"city": "Randolph", "price": 553318.4814814815, "medianIncome": 87797, "population": 22312, "walk_score": 32.68, "bike_score": 32.76923076923077, "transit_score": 29.92, "livability": 31.78974358974359}, {"city": "Rehoboth", "price": 655044.4444444445, "medianIncome": 70559, "population": 42678, "walk_score": 5.2, "bike_score": 23.285714285714285, "transit_score": 2.0, "livability": 10.161904761904761}, {"city": "Revere", "price": 679394.0757575758, "medianIncome": 77860, "population": 32509, "walk_score": 51.09090909090909, "bike_score": 31.075757575757574, "transit_score": 46.45454545454545, "livability": 42.87373737373738}, {"city": "Roxbury", "price": 905061.72, "medianIncome": 60975, "population": 39121, "walk_score": 60.92, "bike_score": 55.56, "transit_score": 3.0, "livability": 39.82666666666667}, {"city": "Salem", "price": 672955.8676470588, "medianIncome": 54835, "population": 42732, "walk_score": 61.35820895522388, "bike_score": 37.83076923076923, "transit_score": 21.104477611940297, "livability": 40.09781859931113}, {"city": "Saugus", "price": 801622.1481481482, "medianIncome": 81471, "population": 40547, "walk_score": 32.96296296296296, "bike_score": 24.192307692307693, "transit_score": 21.846153846153847, "livability": 26.333808167141502}, {"city": "Shrewsbury", "price": 877563.0909090909, "medianIncome": 56970, "population": 25309, "walk_score": 21.5, "bike_score": 18.59090909090909, "transit_score": 2.0, "livability": 14.030303030303031}, {"city": "Somerville", "price": 1224422.8, "medianIncome": 80384, "population": 13702, "walk_score": 62.88461538461539, "bike_score": 80.32673267326733, "transit_score": 62.06666666666667, "livability": 68.42600490818313}, {"city": "South Boston", "price": 1063241.8775510204, "medianIncome": 90943, "population": 904, "walk_score": 66.10204081632654, "bike_score": 57.229166666666664, "transit_score": 2.5, "livability": 41.9437358276644}, {"city": "Springfield", "price": 337277.42654028436, "medianIncome": 87131, "population": 112049, "walk_score": 48.07142857142857, "bike_score": 34.99052132701422, "transit_score": 40.11374407582938, "livability": 41.058564658090724}, {"city": "Stoneham", "price": 829966.6111111111, "medianIncome": 65254, "population": 24758, "walk_score": 45.44444444444444, "bike_score": 29.5, "transit_score": 21.333333333333332, "livability": 32.09259259259259}, {"city": "Wakefield", "price": 876058.25, "medianIncome": 71508, "population": 28954, "walk_score": 42.916666666666664, "bike_score": 27.083333333333332, "transit_score": 15.083333333333334, "livability": 28.36111111111111}, {"city": "Waltham", "price": 1234133.5106382978, "medianIncome": 89749, "population": 18716, "walk_score": 54.46808510638298, "bike_score": 40.78260869565217, "transit_score": 30.085106382978722, "livability": 41.77860006167129}, {"city": "Warren", "price": 379083.3333333333, "medianIncome": 77693, "population": 23777, "walk_score": 10.75, "bike_score": 4.6, "transit_score": 3.0, "livability": 6.116666666666667}, {"city": "Warwick", "price": 402800.0, "medianIncome": 76329, "population": 47928, "walk_score": 29.666666666666668, "bike_score": 24.818181818181817, "transit_score": 16.90909090909091, "livability": 23.797979797979796}, {"city": "Watertown", "price": 1078211.9253731344, "medianIncome": 55240, "population": 27574, "walk_score": 61.666666666666664, "bike_score": 50.46153846153846, "transit_score": 22.5, "livability": 44.87606837606838}, {"city": "West Newton", "price": 2477200.0, "medianIncome": 90441, "population": 3845, "walk_score": 50.6, "bike_score": 48.4, "transit_score": 95.0, "livability": 64.66666666666667}, {"city": "West Roxbury", "price": 884404.8292682926, "medianIncome": 89650, "population": 7449, "walk_score": 38.61538461538461, "bike_score": 32.63157894736842, "transit_score": 11.666666666666666, "livability": 27.6378767431399}, {"city": "Westborough", "price": 948479.3823529412, "medianIncome": 53596, "population": 6788, "walk_score": 16.93103448275862, "bike_score": 13.862068965517242, "transit_score": 3.0, "livability": 11.264367816091953}, {"city": "Winchester", "price": 1818393.3333333333, "medianIncome": 63918, "population": 15589, "walk_score": 27.571428571428573, "bike_score": 38.857142857142854, "transit_score": 5.0, "livability": 23.80952380952381}, {"city": "Winthrop", "price": 802838.2222222222, "medianIncome": 54324, "population": 40358, "walk_score": 52.888888888888886, "bike_score": 27.944444444444443, "transit_score": 9.0, "livability": 29.944444444444443}, {"city": "Woburn", "price": 880968.3157894737, "medianIncome": 59111, "population": 15787, "walk_score": 31.736842105263158, "bike_score": 24.055555555555557, "transit_score": 18.263157894736842, "livability": 24.685185185185187}, {"city": "Woonsocket", "price": 574900.0, "medianIncome": 72350, "population": 33746, "walk_score": 78.0, "bike_score": 45.0, "transit_score": 3.0, "livability": 42.0}, {"city": "Worcester", "price": 539320.2150537635, "medianIncome": 68935, "population": 80117, "walk_score": 41.54022988505747, "bike_score": 27.786516853932586, "transit_score": 28.477272727272727, "livability": 32.601339822087596}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>